<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../styles.css">
<script src="../script.js" defer></script>
<link rel="icon" href="../favicon.png">
<title>NewsTyping</title>
<meta name="description" content="ä»Šã€æ—¥æœ¬ã§èµ·ãã¦ã„ã‚‹ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã—ãªãŒã‚‰å­¦ã¹ã‚‹ã€NewsTypingã€ã€‚æœ€æ–°ã®æ™‚äº‹ãƒã‚¿ã‚’æ•™æã«ã€æ¥½ã—ã¿ãªãŒã‚‰ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹å­¦ç¿’å‹ã‚¢ãƒ—ãƒªã§ã™ã€‚">
</head>
<body>
<header class="site-header">

<div class="logo">
<a href="../TOP/">
<img src="../header.png" alt="BrandMaker.now">
</a>
</div>

<div class="header-center">
<div class="support-unit">
<div class="support-buttons">
<a href="../Q&A/" class="btn QA">Q&A</a>
<a href="../Contact/" class="btn Contact">ãŠå•ã„åˆã‚ã›</a>
</div>

<div class="support-info">
<p class="time">è¿”ä¿¡å¯¾å¿œæ™‚é–“ï¼šå¹³æ—¥ 10:00 ã€œ 17:00</p>
<span id="status-message" class="status-badge">24æ™‚é–“å—ä»˜ä¸­</span>
</div>
</div>
</div>

<div class="header-right">
<a href="https://x.com/Brandmaker_Now" target="_blank" rel="noopener noreferrer" class="x-link"><img src="../logo.svg" alt="ğ•" width="150"></a>
</div>

</header>
<main>
<nav class="breadcrumb">
<ol>
<li><a href="../TOP/">HOME</a></li>
<li>NewsTyping</li>
</ol>
</nav>

<h1>NewsTyping</h1>

<div class="container">

<div id="setup-area">

<div class="news-header">
<h3>æœ¬æ—¥ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ä¸€è¦§</h3>
<button onclick="document.getElementById('myModal').showModal()" class="help-btn">?</button>
</div>

<div id="update-time"></div>
<div id="news-list-container">ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</div>
<button id="start-btn" disabled>ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<div id="game-area">
<div id="word">æº–å‚™ä¸­...</div>
<input type="text" id="input-field" placeholder="ã“ã“ã«å…¥åŠ›ã—ã¦ãã ã•ã„" autocomplete="off">
            
<div id="detail-area">
<div id="detail-text">æ­£è§£ï¼ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®è©³ç´°ã‚’èª­ã¿ã¾ã™ã‹ï¼Ÿ</div>
<a id="detail-link" href="#" target="_blank">ğŸ‘‰ è©³ã—ãã¯ã“ã¡ã‚‰ï¼ˆYahoo!ãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼‰</a>
<button id="next-btn">æ¬¡ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¸</button>
</div>

<div class="info" id="status">æ®‹ã‚Š: --</div>
</div>
        
</div>

<script>
    const wordDisplay = document.getElementById('word');
    const inputField = document.getElementById('input-field');
    const statusDisplay = document.getElementById('status');
    const setupArea = document.getElementById('setup-area');
    const gameArea = document.getElementById('game-area');
    const detailArea = document.getElementById('detail-area');
    const detailLink = document.getElementById('detail-link');
    const nextBtn = document.getElementById('next-btn');
    const newsListContainer = document.getElementById('news-list-container');
    const startBtn = document.getElementById('start-btn');
    const updateTimeDisplay = document.getElementById('update-time');

    let newsData = [];
    let currentIndex = 0;

    async function init() {
        try {
            const res = await fetch('./news.txt?t=' + Date.now());
            if (!res.ok) throw new Error("news.txtãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");

            const text = await res.text();
            let lines = text.trim().split('\n').map(l => l.trim()).filter(l => l.length > 0);
            
            if (lines.length > 0 && lines[0].startsWith('æœ€çµ‚æ›´æ–°')) {
                updateTimeDisplay.textContent = lines.shift();
            }

            newsData = [];
            for (let i = 0; i < lines.length; i += 2) {
                if (lines[i] && lines[i+1] && lines[i+1].startsWith('http')) {
                    newsData.push({
                        title: lines[i],
                        link: lines[i+1]
                    });
                }
            }

            if (newsData.length > 0) {
                newsListContainer.innerHTML = newsData.map((item, i) => 
                    `<div class="news-item">${i+1}. ${item.title}</div>`
                ).join('');
                startBtn.disabled = false;
            } else {
                newsListContainer.textContent = "è¡¨ç¤ºã§ãã‚‹ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚";
            }
        } catch (e) {
            newsListContainer.textContent = "èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚";
            console.error(e);
        }
    }

    startBtn.addEventListener('click', () => {
        setupArea.style.display = 'none';
        gameArea.style.display = 'block';
        updateDisplay();
    });

    function updateDisplay() {
        if (currentIndex < newsData.length) {
            wordDisplay.textContent = newsData[currentIndex].title;
            statusDisplay.textContent = `æ®‹ã‚Š: ${newsData.length - currentIndex} ä»¶`;
            inputField.value = '';
            inputField.disabled = false;
            inputField.style.display = 'block';
            detailArea.style.display = 'none';
            inputField.focus();
        } else {
            wordDisplay.textContent = "âœ¨ æœ¬æ—¥ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹çµ‚äº†ï¼ âœ¨";
            inputField.style.display = 'none';
            statusDisplay.textContent = "ãŠç–²ã‚Œæ§˜ã§ã—ãŸ";
        }
    }

    inputField.addEventListener('input', () => {
        if (inputField.value === newsData[currentIndex].title) {
            inputField.disabled = true;
            detailLink.href = newsData[currentIndex].link;
            detailArea.style.display = 'block';
            nextBtn.focus();
        }
    });

    nextBtn.addEventListener('click', () => {
        currentIndex++;
        updateDisplay();
    });

    inputField.addEventListener('paste', (e) => e.preventDefault());

    init();
</script>
</main>
<footer>
<ul>
<li><a href="../terms/">åˆ©ç”¨è¦ç´„</a></li>
<li><a href="../privacy-policy/">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></li>
</ul>
<div style="border-top: 1px solid #555; margin-top: 15px; padding-top: 15px; padding-bottom: 20px;">
&copy; BrandMaker.now. All right reserved.
</div>
</footer>
</body> 
</html>
