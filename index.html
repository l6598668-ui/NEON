<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEON PORTAL</title>
    <link rel="icon" href="mashiopi_favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <h1 class="logo">NEON PORTAL</h1>
</header>

<nav id="feature-menu">
    <div class="feature-grid">
        <button class="feature-btn" onclick="showFeature('timer-section')">タイマー</button>
        <button class="feature-btn" onclick="showFeature('unit-converter')">単位変換</button>
        <button class="feature-btn" onclick="showFeature('color-palette')">色見本帳</button>
        <button class="feature-btn" onclick="showFeature('calculator')">計算機</button>
        <button class="feature-btn" onclick="showFeature('study-counter')">学習記録</button>
        <button class="feature-btn" onclick="showFeature('flashcards')">フラッシュカード</button>
        <button class="feature-btn" onclick="showFeature('random-picker')">ランダム出題</button>
        <button class="feature-btn" onclick="showFeature('bookmarks')">お気に入り</button>
        <button class="feature-btn" onclick="showFeature('rss-reader')">RSSリーダー</button>
        <button class="feature-btn" onclick="showFeature('weather-api')">お天気</button>
        <button class="feature-btn" onclick="showFeature('voting-system')">投票システム</button>
    </div>
</nav>

<main>
    <section id="timer-section" class="feature-content active">
        <div class="timer-wrapper">
            <div class="timer-container stopwatch">
                <h3>STOPWATCH</h3>
                <p class="timer-message">スタートで計測開始、一時停止で停止します。<br>リセットで00:00:00に戻ります。</p>
                <div id="stopwatch-display" class="display">00:00:00</div>
                <div class="timer-controls">
                    <button id="sw-start-btn" class="feature-btn">スタート</button>
                    <button id="sw-pause-btn" class="feature-btn" disabled>一時停止</button>
                    <button id="sw-reset-btn" class="feature-btn">リセット</button>
                </div>
            </div>

            <div class="timer-container countdown">
                <h3>TIMER</h3>
                <p class="timer-message">時間を設定し、スタートでタイマーを開始します。</p>
                <div class="countdown-controls-top">
                    <select id="countdown-hours-input" class="feature-input"></select>
                    <select id="countdown-minutes-input" class="feature-input"></select>
                    <select id="countdown-seconds-input" class="feature-input"></select>
                </div>
                <div id="countdown-display" class="display">00:00:00</div>
                <div class="timer-controls">
                    <button id="cd-start-btn" class="feature-btn">スタート</button>
                    <button id="cd-pause-btn" class="feature-btn" disabled>一時停止</button>
                    <button id="cd-reset-btn" class="feature-btn">リセット</button>
                </div>
            </div>
        </div>
    </section>
    
    <section id="unit-converter" class="feature-content">
        <h2>UNIT CONVERTER</h2>
        <div class="converter-wrapper">
            <input type="number" id="input-value" class="feature-input" value="1" oninput="convertUnits()">
            <select id="input-unit" class="feature-input" onchange="convertUnits()">
                <option value="cm">センチメートル (cm)</option>
                <option value="m">メートル (m)</option>
                <option value="km">キロメートル (km)</option>
                <option value="in">インチ (in)</option>
            </select>
            <span>=</span>
            <input type="text" id="output-value" class="feature-input" readonly>
            <select id="output-unit" class="feature-input" onchange="convertUnits()">
                <option value="cm">センチメートル (cm)</option>
                <option value="m">メートル (m)</option>
                <option value="km">キロメートル (km)</option>
                <option value="in">インチ (in)</option>
            </select>
        </div>
    </section>

    <section id="weather-api" class="feature-content">
        <h2>WEATHER REPORT</h2>
        <div class="converter-wrapper" style="margin-bottom: 20px;">
            <input type="text" id="city-input" class="feature-input" placeholder="都市名 (例: 東京)" style="flex: 1;">
            <button class="feature-btn" onclick="getWeatherByCity()">検索</button>
            <button class="feature-btn" onclick="getWeather()">現在地</button>
        </div>
        <div class="timer-wrapper" style="gap: 15px; flex-direction: column;">
            <div class="timer-container" style="width: 100%; min-height: 150px;">
                <h3 id="weather-location" style="border:none;">場所: --</h3>
                <div id="weather-display" class="display" style="font-size: 2.5rem; margin: 10px 0;">--°C</div>
                <div id="weather-desc">準備完了</div>
            </div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 100%;">
                <div class="timer-container" style="min-height: 110px; min-width: auto; padding: 10px;">
                    <div>明日</div>
                    <div id="forecast-1-icon" style="font-size: 1.5rem; margin: 5px 0;">--</div>
                    <div id="forecast-1-temp" style="color: #0f0;">--°C</div>
                </div>
                <div class="timer-container" style="min-height: 110px; min-width: auto; padding: 10px;">
                    <div>明後日</div>
                    <div id="forecast-2-icon" style="font-size: 1.5rem; margin: 5px 0;">--</div>
                    <div id="forecast-2-temp" style="color: #0f0;">--°C</div>
                </div>
                <div class="timer-container" style="min-height: 110px; min-width: auto; padding: 10px;">
                    <div>3日後</div>
                    <div id="forecast-3-icon" style="font-size: 1.5rem; margin: 5px 0;">--</div>
                    <div id="forecast-3-temp" style="color: #0f0;">--°C</div>
                </div>
            </div>
        </div>
    </section>

    <section id="color-palette" class="feature-content"><h2>COLOR PALETTE</h2></section>
    <section id="calculator" class="feature-content"><h2>CALCULATOR</h2></section>
    <section id="study-counter" class="feature-content"><h2>STUDY COUNTER</h2></section>
    <section id="flashcards" class="feature-content"><h2>FLASHCARDS</h2></section>
    <section id="random-picker" class="feature-content"><h2>RANDOM PICKER</h2></section>
    <section id="bookmarks" class="feature-content"><h2>BOOKMARKS</h2></section>
    <section id="rss-reader" class="feature-content"><h2>RSSリーダー</h2></section>
    <section id="voting-system" class="feature-content"><h2>VOTING SYSTEM</h2></section>

    <section id="progress-bar" class="feature-content"><h2>PROGRESS BAR</h2></section>
</main>

<footer>
    <p>&copy; 2026 NEON PORTAL. All Rights Reserved.</p>
</footer>
   
<script src="Javascript"></script>
<script>
let authToken = "";
const repoOwner = "あなたのユーザー名"; // ★自分のユーザー名に書き換え
const repoName = "リポジトリ名";       // ★リポジトリ名に書き換え
const filePath = "votes.txt";         // 結果を保存するファイル名

function startSession() {
    authToken = document.getElementById('gh-token').value;
    if (authToken) {
        document.getElementById('setup-area').style.display = 'none';
        document.getElementById('vote-area').style.display = 'block';
    }
}

async function castVote(choice) {
    const status = document.getElementById('status-msg');
    status.innerText = "送信中...";
    try {
        const url = `https://api.github.com{repoOwner}/${repoName}/contents/${filePath}`;
        const getRes = await fetch(url, { headers: { "Authorization": `token ${authToken}` } });
        const fileData = await getRes.json();
        
        // 既存のデータに追記（日本語対応）
        const oldText = fileData.content ? decodeURIComponent(escape(atob(fileData.content))) : "";
        const newText = oldText + choice + "\n";
        const encodedText = btoa(unescape(encodeURIComponent(newText)));

        const putRes = await fetch(url, {
            method: "PUT",
            headers: { "Authorization": `token ${authToken}`, "Content-Type": "application/json" },
            body: JSON.stringify({ message: "Vote", content: encodedText, sha: fileData.sha })
        });

        if (putRes.ok) {
            status.innerText = "投票完了！";
            setTimeout(() => { status.innerText = ""; }, 2000);
        }
    } catch (e) {
        alert("エラー：トークンが違うか、ファイルがありません");
    }
}
</script>

</body>
</html>
